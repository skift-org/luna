// Named Arguments Tests

// Test: Simple named argument
var greet = fn(name) { name };
assert greet(name: "bruh") == "bruh";

// Test: Named argument with default
var welcome = fn(name: "World") { name };
assert welcome() == "World";
assert welcome(name: "Alice") == "Alice";

// Test: Multiple named arguments
var createUser = fn(name, age) { {name: name, age: age} };
var user = createUser(name: "Bob", age: 30);
assert user.name == "Bob";
assert user.age == 30;

// Test: Named arguments in different order
var sub = fn(a, b) { a - b };
assert sub(a: 10, b: 3) == 7;
assert sub(b: 3, a: 10) == 7;

// Test: Mix positional and named
var config = fn(host, port: 8080, ssl: false) { {host: host, port: port, ssl: ssl} };
var c1 = config("localhost");
assert c1.host == "localhost";
assert c1.port == 8080;
assert c1.ssl == false;

var c2 = config("localhost", ssl: true);
assert c2.host == "localhost";
assert c2.port == 8080;
assert c2.ssl == true;

var c3 = config("localhost", port: 3000, ssl: true);
assert c3.host == "localhost";
assert c3.port == 3000;
assert c3.ssl == true;

// Test: Named argument overrides default
var power = fn(base, exp: 2) { 
    if (exp == 0) 1
    else if (exp == 1) base
    else if (exp == 2) base * base
    else base * base * base;
};
assert power(3) == 9;
assert power(3, exp: 3) == 27;
assert power(base: 2, exp: 3) == 8;

// Test: All named arguments
var point = fn(x: 0, y: 0) { {x: x, y: y} };
var p1 = point();
assert p1.x == 0;
assert p1.y == 0;

var p2 = point(x: 5);
assert p2.x == 5;
assert p2.y == 0;

var p3 = point(y: 10);
assert p3.x == 0;
assert p3.y == 10;

var p4 = point(x: 3, y: 4);
assert p4.x == 3;
assert p4.y == 4;

#pass
